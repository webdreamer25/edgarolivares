{"version":3,"sources":["js/multipleFilterMasonry.js"],"names":["$","fn","multipleFilterMasonry","options","cache","filters","selectorType","filtersGroupSelector","children","each","push","this","data","init","$container","find","itemSelector","masonry","filterItems","selector","result","item","index","sel","is","inArray","reload","items","empty","append","hashFilter","hash","window","location","replace","proc","change","val","length","procUL","click","removeClass","addClass","$$","jQuery"],"mappings":"CAAC,SAASA,GACR,YACAA,GAAEC,GAAGC,sBAAwB,SAASC,GACpC,GAAIC,MACAC,IAEwB,UAAzBF,EAAQG,cACTN,EAAEG,EAAQI,sBAAsBC,WAAWC,KAAK,WAC9CJ,EAAQK,KAAKV,EAAEW,MAAMC,KAAK,YAK9B,IAAIC,GAAO,SAASC,GAClBA,EAAWC,KAAKZ,EAAQa,cAAcP,KAAK,WACzCL,EAAMM,KAAKV,EAAEW,SAEfG,EAAWG,QAAQd,IAIjBe,EAAc,SAASC,GACzB,GAAIC,KAQJ,OAPApB,GAAEI,GAAOK,KAAK,SAASY,GACrBrB,EAAEmB,GAAUV,KAAK,SAASa,EAAMC,GAC3BnB,EAAMiB,GAAMG,GAAGD,KACuB,IAApCvB,EAAEyB,QAAQrB,EAAMiB,GAAOD,IAAgBA,EAAOV,KAAKN,EAAMiB,QAI3DD,GAILM,EAAS,SAASZ,EAAWa,GAC/Bb,EAAWc,QACX5B,EAAE2B,GAAOlB,KAAK,WACZT,EAAEc,GAAYe,OAAO7B,EAAEW,SAEzBG,EAAWG,QAAQ,eACnBH,EAAWG,WAITa,EAAa,SAAShB,GACxB,GAAIiB,GAAOC,OAAOC,SAASF,KAAKG,QAAQ,IAAK,KACZ,IAA9BlC,EAAEyB,QAAQM,EAAM1B,IACjBqB,EAAOZ,EAAYd,EAAE,IAAM+B,KAI3BI,EAAO,SAASrB,GAClBd,EAAEG,EAAQI,sBAAsBQ,KAAK,0BAA0BN,KAAK,WAClET,EAAEW,MAAMyB,OAAO,WACb,GAAIjB,KACJnB,GAAEG,EAAQI,sBAAsBQ,KAAK,0BAA0BN,KAAM,WAC9DT,EAAEW,MAAMa,GAAG,aACdL,EAAST,KAAM,IAAMV,EAAEW,MAAM0B,QAGjC,IAAIV,GAAQvB,CACRe,GAASmB,OAAS,IACpBX,EAAQT,EAAYC,IAEtBO,EAAOZ,EAAWa,QAKpBY,EAAS,SAASzB,GACpBd,EAAEG,EAAQI,sBAAsBC,WAAWC,KAAK,WAC9CT,EAAEW,MAAM6B,MAAM,WACZxC,EAAEG,EAAQI,sBAAsBC,WAAWiC,YAAY,YACvDT,OAAOC,SAASF,KAAO/B,EAAEW,MAAMC,KAAK,SACpC,IAAIO,KACJA,GAAST,KAAM,IAAMV,EAAEW,MAAMC,KAAK,WAClCZ,EAAEW,MAAM+B,SAAS,WACjB,IAAIf,GAAQvB,CACRe,GAASmB,OAAS,IACpBX,EAAQT,EAAYC,IAEtBO,EAAOZ,EAAWa,OAItBG,EAAWhB,GACXd,EAAEG,EAAQI,sBAAsBC,WAAWiC,YAAY,YACvDzC,EAAE,2BAA2BgC,OAAOC,SAASF,KAAKG,QAAQ,IAAK,IAAI,KAAKQ,SAAS,YAGnF,OAAO/B,MAAKF,KAAK,WACf,GAAIkC,GAAK3C,EAAEW,KACXE,GAAK8B,GACoB,SAAzBxC,EAAQG,aAA0BiC,EAAOI,GAAMR,EAAKQ,OAGxDX,OAAOY","file":"../../js/multipleFilterMasonry.js","sourcesContent":["(function($){\r\n  'use strict';\r\n  $.fn.multipleFilterMasonry = function(options){\r\n    var cache=[];\r\n    var filters = [];\r\n\r\n    if(options.selectorType === 'list') {\r\n      $(options.filtersGroupSelector).children().each(function() {\r\n        filters.push($(this).data('filter'));\r\n      });\r\n    }\r\n\r\n    //the main job of the function is to cache the item,because we are going to filter the items later\r\n    var init = function($container){\r\n      $container.find(options.itemSelector).each(function(){\r\n        cache.push($(this));\r\n      });\r\n      $container.masonry(options);\r\n    };\r\n\r\n    //filter items in cache\r\n    var filterItems = function(selector){\r\n      var result=[];\r\n      $(cache).each(function(item){\r\n        $(selector).each(function(index,sel) {\r\n          if(cache[item].is(sel)){\r\n            if($.inArray(cache[item], result) === -1) result.push(cache[item]);\r\n          }\r\n        });\r\n      });\r\n      return result;\r\n    };\r\n\r\n    //reload masonry\r\n    var reload = function($container,items){\r\n      $container.empty();\r\n      $(items).each(function(){\r\n        $($container).append($(this));\r\n      });\r\n      $container.masonry('reloadItems');\r\n      $container.masonry();\r\n    };\r\n\r\n    // Hash filter\r\n    var hashFilter = function($container) {\r\n      var hash = window.location.hash.replace(\"#\", \"\");\r\n      if($.inArray(hash, filters) !== -1) {\r\n        reload($container, $('.' + hash));\r\n      }\r\n    }\r\n\r\n    var proc = function($container){\r\n      $(options.filtersGroupSelector).find('input[type=\"checkbox\"]').each(function(){\r\n        $(this).change(function(){\r\n          var selector = [];\r\n          $(options.filtersGroupSelector).find('input[type=\"checkbox\"]').each( function() {\r\n            if ( $(this).is(':checked') ) {\r\n              selector.push( '.' + $(this).val() );\r\n            }\r\n          });\r\n          var items = cache;\r\n          if (selector.length > 0) {\r\n            items = filterItems(selector);\r\n          }\r\n          reload($container,items);\r\n        });\r\n      });\r\n    };\r\n\r\n    var procUL = function($container){\r\n      $(options.filtersGroupSelector).children().each(function(){\r\n        $(this).click(function(){\r\n          $(options.filtersGroupSelector).children().removeClass('selected');\r\n          window.location.hash = $(this).data('filter');\r\n          var selector = [];\r\n          selector.push( '.' + $(this).data('filter') );\r\n          $(this).addClass('selected');\r\n          var items = cache;\r\n          if (selector.length > 0) {\r\n            items = filterItems(selector);\r\n          }\r\n          reload($container,items);\r\n        });\r\n      });\r\n\r\n      hashFilter($container);\r\n      $(options.filtersGroupSelector).children().removeClass('selected');\r\n      $('.filters li[data-filter='+window.location.hash.replace(\"#\", \"\")+']').addClass('selected');\r\n    };\r\n\r\n    return this.each(function() {\r\n      var $$ = $(this);\r\n      init($$);\r\n      options.selectorType === 'list' ? procUL($$) : proc($$);\r\n    });\r\n  };\r\n}(window.jQuery));\r\n"]}